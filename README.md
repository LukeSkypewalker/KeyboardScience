# KeyboardScience
Keyboard Layout Optimizer

Общее количество комбинаций для букв английской раскладки - факториал 26. Космическое число! В лоб, без квантового компьютера перебрать невозможно.
Суб-оптимальные методы - генетика и отжиг - прекрасны и я целился в них, но для проверки всегда хорошо иметь референсные значения.
Я начал эксперенментировать с брутфорсом и нашел пару интересных эвристик, на которых в итоге построено решение.

Эвристика1:
Меня интересовали только раскладки содержащие топовые 8 букв на home row - A S T E N I R O.
Буквы H и R совокупно по разным источникам +-на равных делят 8е место, поэтому хорошо бы расширить базовый перебор до 9ти букв. 
Но, в Русском языке Р встречается намного чаще чем Х, поэтому R победила без боя. 
Все остальные 7 букв так же топчик, так что моя Русская раскладка - тоже А С Т Е Н И Р О

Шаг алгоритма номер 1:
Берем все буквы, сортируем по частоте, Делим на топ 8 и остальные.
Из первых берем все возможные комбинации по 4 и дополняем их всеми комбинациями по половине из остальных букв
Премножаем множества > Получаем список всех релевантных левых половинок раскладок.

Эвристика2: 
Из восьми элементов по четыре можно составить 1680 комбинаций. Всех остальных букв остается 14. комбинации 7из 14ти = 17 297 280. Теперь еще умножте одно на другое и можно расходится.

Или подрезать ряд с низу как незначительный - j x q z можно расставить потом руками по неудобным позициям и тогда комбинаций останется 30 240 (но всё равно умноженных на 1680)
Поэтому в коде есть наборы букв и биграм по 26, 22, 20, 18 шт. Каждая пара сокращает время перебора в десяток раз. Топ 18 букв займет на 6ти ядерном ноутбуке всего пол часа. 22е буквы можно посчитать за сутки.

Шаг 2:
Оцениваем каждую комбинацию. Например, измеряем частоту смены рук по биграммам и штрафуем за перекос по суммарной частоте букв на обеих руках.
Далее, для каждой половинки нужно выбрать оптимальную расстановку - перебираем их все по очереди, оцениваем каждую, ищем лучшую, плюсуем её очки в общий котел.
Для оценки перестановки можно посмотреть например насколько удобно набирать биграммы - в коде есть табличка с весами, в которой как раз можно задать "насколько сильно вы не любите нажимать две кнопки подряд мезинцем" и насколько "перекаты внутрь вам удобнее наружних". я вот очень люблю внутрь. Тут же можно штрафануть за перекос баланса по пальцам или накинуть баллов за то, что какие-либо буквы похожи на qwerty, особенно те, что под частыми горячими клавишами.

От весов как раз и будет зависит раскладка вашей мечты - простор для творчества и эксперементов.